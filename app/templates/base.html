{% extends "bootstrap/base.html" %}

{# It doesn't seem to matter whether this block comes before or after the "title" block... #}
{% block head %}
{{ super() }}
<link rel="shortcut icon" href="{{ url_for('static',filename='favicon.ico') }}"
      type="image/x-icon" >
<link rel="icon" href="{{ url_for('static',filename='favicon.ico') }}"
      type="image/x-icon" >
{% endblock %}

{% block scripts %}
{{ super() }}
{{ moment.include_moment() }}
{% endblock %}

{% block title %}Flasky{% endblock %}

{% block navbar %}
<div class="navbar navbar-inverse" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle" data-toggle="collapse" data-target=".navbar-collapse">
        <span class="sr-only">Toggle navigation</span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <a class="navbar-brand" href="/">Flasky</a>
    </div>
    <div class="navbar-collapse collapse">
      <ul class="nav navbar-nav">
        {# N.B. THE href PART OF THE FOLLOWING IS LIKELY A CURRENT PROBLEM,
           BUT GRINBERG'S BOOK DIDN'T EXPLICITLY SAY TO CHANGE IT.
           IT WAS CHANGED IN HIS GIT REPO TO:  
             url_for('main.index')
           BY THE 7a TAG IN HIS REPOSITORY. #}	
        <li><a href="/">Home</a></li>
      </ul>
      {# WAS NOT SURE ABOUT WHERE THIS SHOULD BE PLACED:
         IN MIDST OF CHAPTER 8.
         HAD TO PEEK AT GRINBERG'S REPOSITORY FOR A HINT. #}
      <ul class="havbar navbar-nav navbar-right">
        {% if current_user.is_authenticated %}
        <li><a href="{{ url_for('auth.logout') }}">Log Out</a></li>
        {% else %}
        <li><a href="{{ url_for('auth.login') }}">Log In</a></li>
        {% endif %}
      </ul>
      {# END OF STUFF ADDED IN CHAPTER 8. #}
    </div>
  </div>
</div>
{% endblock %}

{% block content %}
<div class="container">
  {# Looks like this lets us render a Bootstrap-styled "message button"
     and we can just splice into the message-button's body the text of the piled-up
     flash-messages... #}
  {% for message in get_flashed_messages() %}
  <div class="alert alert-warning">
    <button type="button" class="close" data-dismiss="alert">&times;</button>
    {{ message }}
  </div>
  {% endfor %}
  
  {% block page_content %}{% endblock %}
</div>
{% endblock %}
